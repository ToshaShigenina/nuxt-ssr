import{d as se,r as F,o as oe,C as re,t as p,D as ue,E as ce,j as P,F as de,G,H as X,I as ve,J as fe,K as ge,L as j,M as be,N as me,O,P as R,Q as V,z as d,R as B,S as q,T as w,U,V as H,W as ye,_ as J,X as he,Y as _e,Z as D,v as h,A as E,$ as K,x as A,a0 as M,a1 as N,y as W,a2 as L}from"./u6BQxul8.js";import{l as pe,u as ke,a as Q,V as T,m as xe,b as Y,c as Pe,d as Ve,e as Le,f as Z,g as ee,h as Se,i as Ce}from"./DRxqFSVy.js";import{V as Ie}from"./XqlyFaGU.js";const Be=Symbol.for("nuxt:client-only"),Ae=se({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:n,attrs:a}){const g=F(!1);return oe(()=>{g.value=!0}),re(Be,!0),l=>{var y;if(g.value)return(y=n.default)==null?void 0:y.call(n);const u=n.fallback||n.placeholder;if(u)return u();const m=l.fallback||l.placeholder||"",f=l.fallbackTag||l.placeholderTag||"span";return p(f,a,m)}}}),Te=ue("employee",()=>{const e=F(!1),n=ce({page:1,pageSize:10,totalCount:0}),a=F(null),g=P(()=>Math.ceil(n.totalCount/n.pageSize)),l=P(()=>a.value?a.value.map(({id:o,name:S,contactsList:c})=>{var s,v;return{id:o,name:S,email:((s=c.find(k=>k.type==="email"))==null?void 0:s.value)??"-",phone:((v=c.find(k=>k.type==="phone"))==null?void 0:v.value)??"-"}}):[]),u=o=>e.value=o,m=o=>n.page=o,f=o=>n.totalCount=o,y=o=>{a.value=[...o]};return{loading:e,setLoading:u,employeesList:a,employees:l,loadEmployees:async()=>{u(!1);const o=await pe(n.page,n.pageSize);y(o.items),f(o.pagination.totalCount),u(!0)},pagination:n,pageCount:g,setPage:m}});function $e(){const e=F([]);de(()=>e.value=[]);function n(a,g){e.value[g]=a}return{refs:e,updateRef:n}}const Re=X({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:w,default:"$first"},prevIcon:{type:w,default:"$prev"},nextIcon:{type:w,default:"$next"},lastIcon:{type:w,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Se(),...ee(),...Z(),...Le(),...Ve(),...Pe(),...Y({tag:"nav"}),...q(),...xe({variant:"text"})},"VPagination"),we=G()({name:"VPagination",props:Re(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,n){let{slots:a,emit:g}=n;const l=ve(e,"modelValue"),{t:u,n:m}=fe(),{isRtl:f}=ge(),{themeClasses:y}=j(e),{width:$}=be(),o=me(-1);O(void 0,{scoped:!0});const{resizeRef:S}=ke(t=>{if(!t.length)return;const{target:i,contentRect:r}=t[0],b=i.querySelector(".v-pagination__list > *");if(!b)return;const _=r.width,I=b.offsetWidth+parseFloat(getComputedStyle(b).marginRight)*2;o.value=k(_,I)}),c=P(()=>parseInt(e.length,10)),s=P(()=>parseInt(e.start,10)),v=P(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):o.value>=0?o.value:k($.value,58));function k(t,i){const r=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((t-i*r)/i).toFixed(2)))}const ae=P(()=>{if(c.value<=0||isNaN(c.value)||c.value>Number.MAX_SAFE_INTEGER)return[];if(v.value<=0)return[];if(v.value===1)return[l.value];if(c.value<=v.value)return R(c.value,s.value);const t=v.value%2===0,i=t?v.value/2:Math.floor(v.value/2),r=t?i:i+1,b=c.value-i;if(r-l.value>=0)return[...R(Math.max(1,v.value-1),s.value),e.ellipsis,c.value];if(l.value-b>=(t?1:0)){const _=v.value-1,I=c.value-_+s.value;return[s.value,e.ellipsis,...R(_,I)]}else{const _=Math.max(1,v.value-2),I=_===1?l.value:l.value-Math.ceil(_/2)+s.value;return[s.value,e.ellipsis,...R(_,I),e.ellipsis,c.value]}});function C(t,i,r){t.preventDefault(),l.value=i,r&&g(r,i)}const{refs:te,updateRef:le}=$e();O({VPaginationBtn:{color:V(e,"color"),border:V(e,"border"),density:V(e,"density"),size:V(e,"size"),variant:V(e,"variant"),rounded:V(e,"rounded"),elevation:V(e,"elevation")}});const ne=P(()=>ae.value.map((t,i)=>{const r=b=>le(b,i);if(typeof t=="string")return{isActive:!1,key:`ellipsis-${i}`,page:t,props:{ref:r,ellipsis:!0,icon:!0,disabled:!0}};{const b=t===l.value;return{isActive:b,key:t,page:m(t),props:{ref:r,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:b?e.activeColor:e.color,"aria-current":b,"aria-label":u(b?e.currentPageAriaLabel:e.pageAriaLabel,t),onClick:_=>C(_,t)}}}})),x=P(()=>{const t=!!e.disabled||l.value<=s.value,i=!!e.disabled||l.value>=s.value+c.value-1;return{first:e.showFirstLastPage?{icon:f.value?e.lastIcon:e.firstIcon,onClick:r=>C(r,s.value,"first"),disabled:t,"aria-label":u(e.firstAriaLabel),"aria-disabled":t}:void 0,prev:{icon:f.value?e.nextIcon:e.prevIcon,onClick:r=>C(r,l.value-1,"prev"),disabled:t,"aria-label":u(e.previousAriaLabel),"aria-disabled":t},next:{icon:f.value?e.prevIcon:e.nextIcon,onClick:r=>C(r,l.value+1,"next"),disabled:i,"aria-label":u(e.nextAriaLabel),"aria-disabled":i},last:e.showFirstLastPage?{icon:f.value?e.firstIcon:e.lastIcon,onClick:r=>C(r,s.value+c.value-1,"last"),disabled:i,"aria-label":u(e.lastAriaLabel),"aria-disabled":i}:void 0}});function z(){var i;const t=l.value-s.value;(i=te.value[t])==null||i.$el.focus()}function ie(t){t.key===U.left&&!e.disabled&&l.value>+e.start?(l.value=l.value-1,H(z)):t.key===U.right&&!e.disabled&&l.value<s.value+c.value-1&&(l.value=l.value+1,H(z))}return Q(()=>d(e.tag,{ref:S,class:["v-pagination",y.value,e.class],style:e.style,role:"navigation","aria-label":u(e.ariaLabel),onKeydown:ie,"data-test":"v-pagination-root"},{default:()=>[d("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&d("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(x.value.first):d(T,B({_as:"VPaginationBtn"},x.value.first),null)]),d("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(x.value.prev):d(T,B({_as:"VPaginationBtn"},x.value.prev),null)]),ne.value.map((t,i)=>d("li",{key:t.key,class:["v-pagination__item",{"v-pagination__item--is-active":t.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(t):d(T,B({_as:"VPaginationBtn"},t.props),{default:()=>[t.page]})])),d("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(x.value.next):d(T,B({_as:"VPaginationBtn"},x.value.next),null)]),e.showFirstLastPage&&d("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(x.value.last):d(T,B({_as:"VPaginationBtn"},x.value.last),null)])])]})),{}}}),Fe=X({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...ee(),...Z(),...Y(),...q()},"VTable"),Ee=G()({name:"VTable",props:Fe(),setup(e,n){let{slots:a,emit:g}=n;const{themeClasses:l}=j(e),{densityClasses:u}=Ce(e);return Q(()=>d(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!a.top,"v-table--has-bottom":!!a.bottom,"v-table--hover":e.hover},l.value,u.value,e.class],style:e.style},{default:()=>{var m,f,y;return[(m=a.top)==null?void 0:m.call(a),a.default?d("div",{class:"v-table__wrapper",style:{height:ye(e.height)}},[d("table",null,[a.default()])]):(f=a.wrapper)==null?void 0:f.call(a),(y=a.bottom)==null?void 0:y.call(a)]}})),{}}}),Me={class:"header"},Ne={key:0},De={key:1},ze={key:0,class:"loader"},Oe={__name:"EmployeesTable",setup(e){const n=Te(),{loading:a,employees:g,pagination:l,pageCount:u}=he(n),{loadEmployees:m,setPage:f}=n,y=[{title:"Имя",key:"name"},{title:"ID",key:"id"},{title:"E-mail",key:"email"},{title:"Телефон",key:"phone"}],$=o=>{f(o),m()};return _e(()=>{m()}),(o,S)=>{const c=Ae;return h(),D(c,null,{default:E(()=>[d(Ie,{variant:"flat",elevation:"0",class:"rounded-lg"},{default:E(()=>[d(Ee,null,{default:E(()=>[A("thead",Me,[A("tr",null,[(h(),p(M,null,N(y,s=>A("th",{key:s.key},W(s.title),1)),64))])]),L(g).length?(h(),p("tbody",De,[(h(!0),p(M,null,N(L(g),s=>(h(),p("tr",{key:s.id},[(h(!0),p(M,null,N(s,(v,k)=>(h(),p("td",{key:`${k}-${s.id}`},W(v),1))),128))]))),128))])):(h(),p("tbody",Ne,S[0]||(S[0]=[A("tr",null,[A("td",{colspan:"4"}," Сотрудники не найдены ")],-1)])))]),_:1}),L(a)?K("",!0):(h(),p("div",ze," Загрузка... "))]),_:1}),L(l).totalCount>0?(h(),D(we,{key:0,"model-value":L(l).page,rounded:"circle",class:"mt-6",length:L(u),disabled:!L(a),"onUpdate:modelValue":$},null,8,["model-value","length","disabled"])):K("",!0)]),_:1})}}},Ue=J(Oe,[["__scopeId","data-v-a8d7a1cc"]]),He={};function Ke(e,n){const a=Ue;return h(),D(a)}const je=J(He,[["render",Ke]]);export{je as default};
